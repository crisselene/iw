<!DOCTYPE html>
<html class="h-100" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:replace="fragments/head :: header" />
    <title>IW: Welcome</title>
</head>

<body class="d-flex flex-column h-100">
    <header th:replace="fragments/nav.html :: nav"></header>

    <main class="flex-shrink-0">
        
        <th:block th:if="0==1">
    <!-- Idea funcionamiento: 
        Datos:  -variable con la lista de categorias (categorias.lista)
                -variables con la lista de platos de cada categoria (una variable por categoria,
                 y cuyo nombre de variable se corresponde con el nombre de la categoria)
        Funcionamiento: La navbar se cargara recorriendo la lista de categorias. Cada boton del navbar tendra como objetivo un div
                        cuyo id sera el nombre de la categoria       

                        Se cargan tantos divs (que seran los contenedores de los platos) como categorias hay.
                        Cada div tendra como id el nombre de la categoria
                        Dentro de cada div se cargan los platos de su categoria, accediendo a la variable que los contiene, 
                        cuyo nombre es el mismo que el de la categoria
                
        *Este th:block con el if, sirve para que este comentario no se cargue en el html que ve el navegador
                    -->
        </th:block>

        <nav class="navbar-light bg-light">
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <th:block th:each="cat,iter: ${categorias}"><!-- Se recorre la lista de categorias para crear los elementos de la navbar, el primero se pone como activo-->
                    <button th:if="${iter.index} == 0" th:text="${cat.debugGetNombre()}" class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" th:data-bs-target="'#'+${cat.debugGetNombre()}" type="button" role="tab" aria-controls="nav-home" aria-selected="true">uno</button>
                    <button th:unless="${iter.index} == 0" th:text="${cat.debugGetNombre()}" class="nav-link" id="nav-home-tab" data-bs-toggle="tab" th:data-bs-target="'#'+${cat.debugGetNombre()}" type="button" role="tab" aria-controls="nav-home" aria-selected="false">uno</button>
                </th:block>
            </div>
          </nav>
         
        <!-- tab que va cambiando los panel que muestra dinamicamente segun lo que se pulse en el navbar-->
          <div class="tab-content" id="nav-tabContent">
               <!-- Se recorre la lista de categorias para crear los pane de cada categoria (los cuales contendran los platos)-->
            <th:block th:each="cat,iter: ${categorias}">
                   
                <!--la primera categoria se marca como activa para que se muestre por defecto-->
                <div th:if="${iter.index} == 0" class="tab-pane fade show active" th:id="${cat.debugGetNombre()}" role="tabpanel" aria-labelledby="nav-home-tab">
                    <div class="row"> <!-- Estructura: Cada pane tendra una fila con columnas indefinidas, de manera que si no entran las columnas, se ponen en varias filas automaticamente-->
                         <!-- Dentro de cada pane, recorremos todos los platos de dicha categoria y los metemos --> 
                        <div class="col-md-3 text-center" th:each="plato: ${cat.debugGetListaPlatos()}" style="margin-top: 1rem; margin-bottom: 1rem;"> <!-- Tras procesarlo seria algo del tipo plato: ${Entrantes}   siendo Entrantes una variable de tipo lista del modelo-->
                            <img th:src="@{/img/PlatoDefault.jpg}" src="/img/PlatoDefault.jpg" alt="logo IW" class="img-thumbnail mw-100">
                            <br>
                            <form th:action = "@{/verPlato}"><!--Por ahora se pasa por get el nombre del plato, pero quizas mas adleante deberia de ser su id-->
                            <button type="submit" class="btn btn-primary" name="platoElegido" th:value="${plato.debugGetName()}" th:text="${plato.debugGetName()}"style="margin-top: 10px;">Patatas bravas</button> 
                        </form>   
                        </div>
                    </div>

                </div>
                <div th:unless="${iter.index} == 0" class="tab-pane fade" th:id="${cat.debugGetNombre()}" role="tabpanel" aria-labelledby="nav-home-tab">
                    <div class="row"> 
                        <div class="col-md-3 text-center" th:each="plato: ${cat.debugGetListaPlatos()}" style="margin-top: 1rem; margin-bottom: 1rem;"> <!-- Tras procesarlo seria algo del tipo plato: ${Entrantes}   siendo Entrantes una variable de tipo lista del modelo-->
                            <img th:src="@{/img/PlatoDefault.jpg}" src="/img/PlatoDefault.jpg" alt="logo IW" class="img-thumbnail mw-100">
                            <br>
                            <form th:action = "@{/verPlato}">
                            <button type="submit" class="btn btn-primary" name="platoElegido" th:value="${plato.debugGetName()}" th:text="${plato.debugGetName()}"style="margin-top: 10px;">Patatas bravas</button> 
                        </form>   
                        </div>
                    </div>
                </div>

                    



            </th:block>

          </div>
    
    </main>
    <th:block th:replace="fragments/footer.html :: footer" />
</body>

</html>